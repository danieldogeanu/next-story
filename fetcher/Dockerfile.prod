FROM node:18-alpine

ENV NODE_ENV production

# We need the backend URL and API keys for this to work.
ARG NEXT_PUBLIC_BACKEND_URL
ARG NEXT_STRAPI_FE_APIKEY
ARG NEXT_STRAPI_BE_APIKEY
ENV NEXT_PUBLIC_BACKEND_URL=${NEXT_PUBLIC_BACKEND_URL}
ENV NEXT_STRAPI_FE_APIKEY=${NEXT_STRAPI_FE_APIKEY}
ENV NEXT_STRAPI_BE_APIKEY=${NEXT_STRAPI_BE_APIKEY}

WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .

CMD ["npm", "start"]
